{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\adlai\\\\Desktop\\\\IngProc\\\\CimaHealth\\\\node_modules\\\\react-native-calendars\\\\src\\\\timeline\\\\Timeline.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport min from 'lodash/min';\nimport map from 'lodash/map';\nimport invoke from 'lodash/invoke';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport styleConstructor from \"./style\";\nimport populateEvents from \"./Packer\";\nvar LEFT_MARGIN = 60 - 1;\nvar TEXT_LINE_HEIGHT = 17;\n\nfunction range(from, to) {\n  return Array.from(Array(to), function (_, i) {\n    return from + i;\n  });\n}\n\nvar _Dimensions$get = Dimensions.get('window'),\n    dimensionWidth = _Dimensions$get.width;\n\nvar Timeline = function (_Component) {\n  _inherits(Timeline, _Component);\n\n  var _super = _createSuper(Timeline);\n\n  function Timeline(props) {\n    var _this;\n\n    _classCallCheck(this, Timeline);\n\n    _this = _super.call(this, props);\n    _this.scrollView = React.createRef();\n    var _this$props = _this.props,\n        _this$props$start = _this$props.start,\n        start = _this$props$start === void 0 ? 0 : _this$props$start,\n        _this$props$end = _this$props.end,\n        end = _this$props$end === void 0 ? 0 : _this$props$end;\n    _this.calendarHeight = (end - start) * 100;\n    _this.style = styleConstructor(props.theme || props.styles, _this.calendarHeight);\n    var width = dimensionWidth - LEFT_MARGIN;\n    var packedEvents = populateEvents(props.events, width, start);\n    var initPosition = min(map(packedEvents, 'top')) - _this.calendarHeight / (end - start);\n    var verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n    _this.state = {\n      _scrollY: verifiedInitPosition,\n      packedEvents: packedEvents\n    };\n    return _this;\n  }\n\n  _createClass(Timeline, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var width = dimensionWidth - LEFT_MARGIN;\n      var prevEvents = prevProps.events,\n          _prevProps$start = prevProps.start,\n          prevStart = _prevProps$start === void 0 ? 0 : _prevProps$start;\n      var _this$props2 = this.props,\n          events = _this$props2.events,\n          _this$props2$start = _this$props2.start,\n          start = _this$props2$start === void 0 ? 0 : _this$props2$start;\n\n      if (prevEvents !== events || prevStart !== start) {\n        this.setState({\n          packedEvents: populateEvents(events, width, start)\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.scrollToFirst && this.scrollToFirst();\n    }\n  }, {\n    key: \"scrollToFirst\",\n    value: function scrollToFirst() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if (_this2.state && _this2.state._scrollY && _this2.scrollView) {\n          var _this2$scrollView, _this2$scrollView$cur;\n\n          (_this2$scrollView = _this2.scrollView) == null ? void 0 : (_this2$scrollView$cur = _this2$scrollView.current) == null ? void 0 : _this2$scrollView$cur.scrollTo({\n            x: 0,\n            y: _this2.state._scrollY,\n            animated: true\n          });\n        }\n      }, 1);\n    }\n  }, {\n    key: \"_renderLines\",\n    value: function _renderLines() {\n      var _this3 = this;\n\n      var _this$props3 = this.props,\n          format24h = _this$props3.format24h,\n          _this$props3$start = _this$props3.start,\n          start = _this$props3$start === void 0 ? 0 : _this$props3$start,\n          _this$props3$end = _this$props3.end,\n          end = _this$props3$end === void 0 ? 24 : _this$props3$end;\n      var offset = this.calendarHeight / (end - start);\n      var EVENT_DIFF = 20;\n      return range(start, end + 1).map(function (i, index) {\n        var timeText;\n\n        if (i === start) {\n          timeText = '';\n        } else if (i < 12) {\n          timeText = !format24h ? i + \" AM\" : i + \":00\";\n        } else if (i === 12) {\n          timeText = !format24h ? i + \" PM\" : i + \":00\";\n        } else if (i === 24) {\n          timeText = !format24h ? '12 AM' : '23:59';\n        } else {\n          timeText = !format24h ? i - 12 + \" PM\" : i + \":00\";\n        }\n\n        return [React.createElement(Text, {\n          key: \"timeLabel\" + i,\n          style: [_this3.style.timeLabel, {\n            top: offset * index - 6\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 17\n          }\n        }, timeText), i === start ? null : React.createElement(View, {\n          key: \"line\" + i,\n          style: [_this3.style.line, {\n            top: offset * index,\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 39\n          }\n        }), React.createElement(View, {\n          key: \"lineHalf\" + i,\n          style: [_this3.style.line, {\n            top: offset * (index + 0.5),\n            width: dimensionWidth - EVENT_DIFF\n          }],\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }\n        })];\n      });\n    }\n  }, {\n    key: \"_onEventPress\",\n    value: function _onEventPress(event) {\n      if (this.props.eventTapped) {\n        this.props.eventTapped(event);\n      } else {\n        invoke(this.props, 'onEventPress', event);\n      }\n    }\n  }, {\n    key: \"_renderEvents\",\n    value: function _renderEvents() {\n      var _this4 = this;\n\n      var packedEvents = this.state.packedEvents;\n      var events = packedEvents.map(function (event, i) {\n        var style = {\n          left: event.left,\n          height: event.height,\n          width: event.width,\n          top: event.top,\n          backgroundColor: event.color ? event.color : '#add8e6'\n        };\n        var numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n        var formatTime = _this4.props.format24h ? 'HH:mm' : 'hh:mm A';\n        return React.createElement(TouchableOpacity, {\n          activeOpacity: 0.9,\n          onPress: function onPress() {\n            return _this4._onEventPress(_this4.props.events[event.index]);\n          },\n          key: i,\n          style: [_this4.style.event, style],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 21\n          }\n        }, _this4.props.renderEvent ? _this4.props.renderEvent(event) : React.createElement(View, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 72\n          }\n        }, React.createElement(Text, {\n          numberOfLines: 1,\n          style: _this4.style.eventTitle,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }\n        }, event.title || 'Event'), numberOfLines > 1 ? React.createElement(Text, {\n          numberOfLines: numberOfLines - 1,\n          style: [_this4.style.eventSummary],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 37\n          }\n        }, event.summary || ' ') : null, numberOfLines > 2 ? React.createElement(Text, {\n          style: _this4.style.eventTimes,\n          numberOfLines: 1,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 37\n          }\n        }, new XDate(event.start).toString(formatTime), \" - \", new XDate(event.end).toString(formatTime)) : null));\n      });\n      return React.createElement(View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          marginLeft: LEFT_MARGIN\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 9\n        }\n      }, events));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ScrollView, {\n        ref: this.scrollView,\n        contentContainerStyle: [this.style.contentStyle, {\n          width: dimensionWidth\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      }, this._renderLines(), this._renderEvents());\n    }\n  }]);\n\n  return Timeline;\n}(Component);\n\nTimeline.propTypes = {\n  start: PropTypes.number,\n  end: PropTypes.number,\n  eventTapped: PropTypes.func,\n  onEventPress: PropTypes.func,\n  format24h: PropTypes.bool,\n  events: PropTypes.arrayOf(PropTypes.shape({\n    start: PropTypes.string.isRequired,\n    end: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    summary: PropTypes.string.isRequired,\n    color: PropTypes.string\n  })).isRequired\n};\nTimeline.defaultProps = {\n  start: 0,\n  end: 24,\n  events: [],\n  format24h: true\n};\nexport { Timeline as default };","map":{"version":3,"sources":["C:/Users/adlai/Desktop/IngProc/CimaHealth/node_modules/react-native-calendars/src/timeline/Timeline.js"],"names":["min","map","invoke","PropTypes","XDate","React","Component","styleConstructor","populateEvents","LEFT_MARGIN","TEXT_LINE_HEIGHT","range","from","to","Array","_","i","Dimensions","get","dimensionWidth","width","Timeline","props","scrollView","createRef","start","end","calendarHeight","style","theme","styles","packedEvents","events","initPosition","verifiedInitPosition","state","_scrollY","prevProps","prevEvents","prevStart","setState","scrollToFirst","setTimeout","current","scrollTo","x","y","animated","format24h","offset","EVENT_DIFF","index","timeText","timeLabel","top","line","event","eventTapped","left","height","backgroundColor","color","numberOfLines","Math","floor","formatTime","_onEventPress","renderEvent","eventTitle","title","eventSummary","summary","eventTimes","toString","marginLeft","contentStyle","_renderLines","_renderEvents","propTypes","number","func","onEventPress","bool","arrayOf","shape","string","isRequired","defaultProps"],"mappings":"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","sourcesContent":["// @flow\nimport min from 'lodash/min';\nimport map from 'lodash/map';\nimport invoke from 'lodash/invoke';\nimport PropTypes from 'prop-types';\nimport XDate from 'xdate';\nimport React, { Component } from 'react';\nimport { View, Text, TouchableOpacity, Dimensions, ScrollView } from 'react-native';\nimport styleConstructor from './style';\nimport populateEvents from './Packer';\nconst LEFT_MARGIN = 60 - 1;\nconst TEXT_LINE_HEIGHT = 17;\nfunction range(from, to) {\n    return Array.from(Array(to), (_, i) => from + i);\n}\nlet { width: dimensionWidth } = Dimensions.get('window');\nexport default class Timeline extends Component {\n    static propTypes = {\n        start: PropTypes.number,\n        end: PropTypes.number,\n        eventTapped: PropTypes.func,\n        onEventPress: PropTypes.func,\n        format24h: PropTypes.bool,\n        events: PropTypes.arrayOf(PropTypes.shape({\n            start: PropTypes.string.isRequired,\n            end: PropTypes.string.isRequired,\n            title: PropTypes.string.isRequired,\n            summary: PropTypes.string.isRequired,\n            color: PropTypes.string\n        })).isRequired\n    };\n    static defaultProps = {\n        start: 0,\n        end: 24,\n        events: [],\n        format24h: true\n    };\n    scrollView = React.createRef();\n    style;\n    calendarHeight;\n    constructor(props) {\n        super(props);\n        const { start = 0, end = 0 } = this.props;\n        this.calendarHeight = (end - start) * 100;\n        this.style = styleConstructor(props.theme || props.styles, this.calendarHeight);\n        const width = dimensionWidth - LEFT_MARGIN;\n        const packedEvents = populateEvents(props.events, width, start);\n        let initPosition = min(map(packedEvents, 'top')) - this.calendarHeight / (end - start);\n        const verifiedInitPosition = initPosition < 0 ? 0 : initPosition;\n        this.state = {\n            _scrollY: verifiedInitPosition,\n            packedEvents\n        };\n    }\n    componentDidUpdate(prevProps) {\n        const width = dimensionWidth - LEFT_MARGIN;\n        const { events: prevEvents, start: prevStart = 0 } = prevProps;\n        const { events, start = 0 } = this.props;\n        if (prevEvents !== events || prevStart !== start) {\n            this.setState({\n                packedEvents: populateEvents(events, width, start)\n            });\n        }\n    }\n    componentDidMount() {\n        this.props.scrollToFirst && this.scrollToFirst();\n    }\n    scrollToFirst() {\n        setTimeout(() => {\n            if (this.state && this.state._scrollY && this.scrollView) {\n                this.scrollView?.current?.scrollTo({\n                    x: 0,\n                    y: this.state._scrollY,\n                    animated: true\n                });\n            }\n        }, 1);\n    }\n    _renderLines() {\n        const { format24h, start = 0, end = 24 } = this.props;\n        const offset = this.calendarHeight / (end - start);\n        const EVENT_DIFF = 20;\n        return range(start, end + 1).map((i, index) => {\n            let timeText;\n            if (i === start) {\n                timeText = '';\n            }\n            else if (i < 12) {\n                timeText = !format24h ? `${i} AM` : `${i}:00`;\n            }\n            else if (i === 12) {\n                timeText = !format24h ? `${i} PM` : `${i}:00`;\n            }\n            else if (i === 24) {\n                timeText = !format24h ? '12 AM' : '23:59';\n            }\n            else {\n                timeText = !format24h ? `${i - 12} PM` : `${i}:00`;\n            }\n            return [\n                <Text key={`timeLabel${i}`} style={[this.style.timeLabel, { top: offset * index - 6 }]}>\n          {timeText}\n        </Text>,\n                i === start ? null : (<View key={`line${i}`} style={[this.style.line, { top: offset * index, width: dimensionWidth - EVENT_DIFF }]}/>),\n                <View key={`lineHalf${i}`} style={[this.style.line, { top: offset * (index + 0.5), width: dimensionWidth - EVENT_DIFF }]}/>\n            ];\n        });\n    }\n    _onEventPress(event) {\n        if (this.props.eventTapped) { //TODO: remove after deprecation\n            this.props.eventTapped(event);\n        }\n        else {\n            invoke(this.props, 'onEventPress', event);\n        }\n    }\n    _renderEvents() {\n        const { packedEvents } = this.state;\n        let events = packedEvents.map((event, i) => {\n            const style = {\n                left: event.left,\n                height: event.height,\n                width: event.width,\n                top: event.top,\n                backgroundColor: event.color ? event.color : '#add8e6'\n            };\n            // Fixing the number of lines for the event title makes this calculation easier.\n            // However it would make sense to overflow the title to a new line if needed\n            const numberOfLines = Math.floor(event.height / TEXT_LINE_HEIGHT);\n            const formatTime = this.props.format24h ? 'HH:mm' : 'hh:mm A';\n            return (<TouchableOpacity activeOpacity={0.9} onPress={() => this._onEventPress(this.props.events[event.index])} key={i} style={[this.style.event, style]}>\n          {this.props.renderEvent ? (this.props.renderEvent(event)) : (<View>\n              <Text numberOfLines={1} style={this.style.eventTitle}>\n                {event.title || 'Event'}\n              </Text>\n              {numberOfLines > 1 ? (<Text numberOfLines={numberOfLines - 1} style={[this.style.eventSummary]}>\n                  {event.summary || ' '}\n                </Text>) : null}\n              {numberOfLines > 2 ? (<Text style={this.style.eventTimes} numberOfLines={1}>\n                  {new XDate(event.start).toString(formatTime)} - {new XDate(event.end).toString(formatTime)}\n                </Text>) : null}\n            </View>)}\n        </TouchableOpacity>);\n        });\n        return (<View>\n        <View style={{ marginLeft: LEFT_MARGIN }}>{events}</View>\n      </View>);\n    }\n    render() {\n        return (<ScrollView ref={this.scrollView} contentContainerStyle={[this.style.contentStyle, { width: dimensionWidth }]}>\n        {this._renderLines()}\n        {this._renderEvents()}\n      </ScrollView>);\n    }\n}\n"]},"metadata":{},"sourceType":"module"}